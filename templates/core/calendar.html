{% extends 'core/base.html' %}
{% block content %}
<div class="d-flex justify-content-between mb-3">
    <h2>Kalender Deadline Tugas</h2>
    <div>
        <span class="badge bg-danger">Overdue</span>
        <span class="badge bg-success">Done</span>
        <span class="badge bg-warning text-dark">In Progress</span>
        <span class="badge bg-primary">Todo</span>
    </div>
</div>

<div class="card p-3 shadow-sm">
    <div id='calendar'></div>
</div>

<!-- FullCalendar JS -->
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,listMonth'
      },
      events: '/calendar/data/', // Ambil data dari endpoint Django kita
      eventClick: function(info) {
        // Mencegah link default, buka di tab baru atau redirect
        if (info.event.url) {
            window.location.href = info.event.url;
            info.jsEvent.preventDefault();
        }
      },
      eventDidMount: function(info) {
        // Tambahkan tooltip (opsional, simple title hover)
        info.el.title = info.event.title;
      }
    });
    calendar.render();
  });
</script>
{% endblock %}